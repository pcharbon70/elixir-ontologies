# Summary: Task 4.2.5 - Guard Extractor

## Overview

Implemented a Guard extractor for Phase 4 that extracts guard clauses from function heads, decomposing combined guards and identifying the guard functions used.

## Files Created

### `lib/elixir_ontologies/extractors/guard.ex` (~380 lines)

Main extractor module with:

**Result Struct:**
```elixir
%Guard{
  expression: Macro.t(),
  expressions: [Macro.t()],
  combinator: :none | :and | :or | :mixed,
  guard_functions: [atom()],
  location: SourceLocation.t() | nil,
  metadata: %{
    count: non_neg_integer(),
    has_type_check: boolean(),
    has_comparison: boolean()
  }
}
```

**Public API:**
- `guard?/1` - Type detection for guard expressions
- `extract/2` - Main extraction from guard AST
- `extract!/2` - Raising variant
- `extract_from_clause/1` - Extract guard from Clause struct
- `has_and?/1` - Check if guard uses `and` combinator
- `has_or?/1` - Check if guard uses `or` combinator
- `has_type_check?/1` - Check if guard contains type checks
- `has_comparison?/1` - Check if guard contains comparisons
- `expression_count/1` - Get number of individual guard expressions
- `known_guard_functions/0` - List all recognized guard functions
- `type_check_functions/0` - List type check guard functions

**Guard Functions Recognized:**
- Type checks: is_atom, is_binary, is_boolean, is_float, is_integer, is_list, is_map, is_nil, is_number, is_pid, is_port, is_reference, is_struct, is_tuple, etc.
- Comparison operators: ==, !=, ===, !==, <, >, <=, >=
- Arithmetic operators: +, -, *, /
- Other guards: abs, length, map_size, elem, hd, tl, tuple_size, etc.

**Combinator Detection:**
- `:none` - Single guard expression
- `:and` - Guards combined with `and`
- `:or` - Guards combined with `or`
- `:mixed` - Both `and` and `or` in the same guard

### `test/elixir_ontologies/extractors/guard_test.exs` (~400 lines)

Comprehensive test coverage:
- Type detection tests
- Single guard extraction tests
- Combined guard tests (and)
- Combined guard tests (or)
- Mixed combinator tests
- Extract from clause tests
- Helper function tests
- Error handling tests
- Integration tests with `quote`

## Key Implementation Details

1. **Guard Decomposition:** Combined guards are recursively decomposed into individual expressions while preserving the original combined expression.

2. **Function Extraction:** Guard functions are extracted from all expressions, including nested function calls within comparisons.

3. **Combinator Detection:** The extractor identifies whether guards use `and`, `or`, or a mixture of both combinators.

4. **Integration with Clause:** The `extract_from_clause/1` function integrates directly with the Clause extractor to extract guards from function clauses.

5. **Metadata:** Each extraction includes metadata about the number of expressions and whether type checks or comparisons are present.

## Test Results

- **Total Tests:** 66 (22 doctests + 44 unit tests)
- **Failures:** 0
- **Dialyzer:** Passes with 0 errors
- **Full Suite:** 1907 tests (505 doctests + 23 properties + 1379 tests), 0 failures

## Ontology Alignment

Supports the following from `elixir-structure.ttl`:
- `GuardClause` - A guard expression on a function clause
- `hasGuard` property linking function head to guard

## Relationship to Other Extractors

The Guard extractor complements the Clause extractor (4.2.2):
- **Clause extractor:** Extracts function head with guard reference
- **Guard extractor:** Analyzes guard expressions in detail

This completes Section 4.2 - Function Extractor, which includes:
- 4.2.1 Function Definition Extractor
- 4.2.2 Function Clause Extractor
- 4.2.3 Parameter Extractor
- 4.2.4 Return Expression Extractor
- 4.2.5 Guard Extractor

## Next Steps

Section 4.3 - Type Spec Extractor:
- 4.3.1 Type Definition Extractor (@type, @typep, @opaque)
- 4.3.2 Function Spec Extractor (@spec)
- 4.3.3 Type Expression Parser
