# Summary: Task 1.4.2 Graph Serialization

## Overview

Extended the `ElixirOntologies.Graph` module with serialization capabilities for exporting RDF graphs to Turtle format and saving them to files.

## Changes Made

### Extended: `lib/elixir_ontologies/graph.ex`

Added serialization functions (~140 lines):

**Core API Functions:**

| Function | Description |
|----------|-------------|
| `to_turtle/1` | Serialize graph to Turtle string with default prefixes |
| `to_turtle/2` | Serialize with options (prefixes, base, indent) |
| `to_turtle!/1`, `to_turtle!/2` | Bang versions that raise on error |
| `save/2` | Save graph to file path (Turtle format) |
| `save/3` | Save with options (format, prefixes, base) |
| `save!/2`, `save!/3` | Bang versions that raise on error |

**Options Supported:**

| Option | Description |
|--------|-------------|
| `:prefixes` | Custom prefix map (defaults to NS.prefix_map/0) |
| `:base` | Base IRI for the document |
| `:implicit_base` | Omit @base but use for relative IRIs |
| `:indent` | Indentation width |
| `:format` | Output format (:turtle default) |

### Extended: `test/elixir_ontologies/graph_test.exs`

Added 16 new serialization tests + 3 doctests covering:
- Empty graph serialization
- Graph with statements
- Ontology prefixes in output
- Parseable Turtle output (round-trip)
- Custom prefixes
- Base IRI handling
- File save operations
- Error handling
- Round-trip save/load

## Files Changed

- `lib/elixir_ontologies/graph.ex` - Extended with serialization functions (+140 lines)
- `test/elixir_ontologies/graph_test.exs` - Added serialization tests (+200 lines)
- `notes/features/1.4.2-graph-serialization.md` - Updated to complete
- `notes/planning/phase-01.md` - Marked task 1.4.2 complete

## Metrics

| Metric | Value |
|--------|-------|
| New Serialization Tests | 16 + 3 doctests |
| Graph Tests Total | 71 (55 tests + 16 doctests) |
| Total Project Tests | 248 |
| New Public Functions | 6 |
| Lines Added | ~340 |

## How to Test

```bash
# Run Graph tests
mix test test/elixir_ontologies/graph_test.exs

# Run all tests
mix test
```

## Usage Examples

```elixir
alias ElixirOntologies.Graph
alias ElixirOntologies.NS.Structure

# Create a graph with data
graph =
  Graph.new(base_iri: "https://example.org/code#")
  |> Graph.add({~I<https://example.org/code#MyApp>, RDF.type(), Structure.Module})
  |> Graph.add({~I<https://example.org/code#MyApp>, Structure.moduleName(), "MyApp"})

# Serialize to Turtle string
{:ok, turtle} = Graph.to_turtle(graph)
# Or with bang version
turtle = Graph.to_turtle!(graph)

# Save to file
:ok = Graph.save(graph, "/path/to/output.ttl")
# With options
:ok = Graph.save(graph, "/path/to/output.ttl", base: "https://example.org/code#")

# Output includes all ontology prefixes
# @prefix struct: <https://w3id.org/elixir-code/structure#> .
# @prefix core: <https://w3id.org/elixir-code/core#> .
# ...
```

## Sample Output

```turtle
@prefix bfo: <http://purl.obolibrary.org/obo/> .
@prefix core: <https://w3id.org/elixir-code/core#> .
@prefix struct: <https://w3id.org/elixir-code/structure#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

<https://example.org/code#MyApp>
    a struct:Module ;
    struct:moduleName "MyApp" .
```
