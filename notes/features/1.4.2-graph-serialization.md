# Feature 1.4.2: Graph Serialization

## Problem Statement

The Graph module needs serialization capabilities to export RDF graphs to Turtle format and save them to files. This enables:
- Persisting generated knowledge graphs to disk
- Sharing graphs with other RDF tools
- Human-readable output for debugging and inspection

## Solution Overview

Extend the `ElixirOntologies.Graph` module with serialization functions that:
1. Serialize graphs to Turtle format strings
2. Save graphs to files with proper error handling
3. Include all ontology prefixes for compact, readable output
4. Support multiple formats (Turtle by default, extensible)

## Technical Details

### File Location
`lib/elixir_ontologies/graph.ex` (extend existing module)

### Dependencies
- `RDF.Turtle` from rdf library for Turtle serialization
- `ElixirOntologies.NS.prefix_map/0` for prefix declarations

### API Design

| Function | Description |
|----------|-------------|
| `to_turtle/1` | Serialize graph to Turtle string with default prefixes |
| `to_turtle/2` | Serialize with custom options (prefixes, base) |
| `save/2` | Write graph to file path (Turtle format) |
| `save/3` | Write graph to file with format option |

### Supported Formats
- `:turtle` - Turtle format (default)
- Future: `:ntriples`, `:json_ld`, `:rdf_xml`

## Implementation Plan

- [x] 1.4.2.1 Implement `Graph.to_turtle/1` - serialize to Turtle string
- [x] 1.4.2.2 Implement `Graph.to_turtle/2` - with options (prefixes, base)
- [x] 1.4.2.3 Implement `Graph.save/2` - write to file path
- [x] 1.4.2.4 Implement `Graph.save/3` - with format option
- [x] 1.4.2.5 Ensure all ontology prefixes included in output
- [x] 1.4.2.6 Write serialization tests (16 new tests)

## Success Criteria

- [x] All functions implemented with proper typespecs
- [x] Comprehensive documentation with examples
- [x] 10+ tests covering all serialization operations (16 tests)
- [x] Output is valid Turtle (parseable by RDF.Turtle)
- [x] Prefixes are properly declared in output

## Current Status

**Status**: Complete

### What Works
- Feature branch created: `feature/1.4.2-graph-serialization`
- Planning document created
- All serialization functions implemented
- 16 new tests passing (plus 3 doctests)
- Output is valid, parseable Turtle
- All ontology prefixes included in output

### Additional Features Implemented
- `to_turtle!/1`, `to_turtle!/2` - Bang versions that raise on error
- `save!/2`, `save!/3` - Bang versions for file operations
- Support for `:format` option (extensible for future formats)
- Round-trip serialization verified (save â†’ load)
