# Feature: 6.1.2 GenServer Callback Extraction

## Problem Statement

Task 6.1.1 implemented GenServer detection. Task 6.1.2 extends this to extract the specific GenServer callbacks implemented in a module. This allows analyzing the server's behavior patterns, understanding message handling, and linking callbacks to the GenServer implementation.

## Solution Overview

Extend the GenServer extractor module with callback extraction functionality:
1. Define callback types for each GenServer callback
2. Detect function definitions matching GenServer callback signatures
3. Extract callback metadata (clauses, guards, return patterns)
4. Link callbacks via `hasGenServerCallback` relationship

## GenServer Callbacks

| Callback | Arity | Description |
|----------|-------|-------------|
| `init/1` | 1 | Initialize server state |
| `handle_call/3` | 3 | Handle synchronous requests |
| `handle_cast/2` | 2 | Handle asynchronous requests |
| `handle_info/2` | 2 | Handle other messages |
| `handle_continue/2` | 2 | Handle continue tuples |
| `terminate/2` | 2 | Cleanup before shutdown |
| `code_change/3` | 3 | Handle hot code upgrades |
| `format_status/1` | 1 | Custom status formatting (OTP 26+) |

## Technical Details

### Result Struct

```elixir
defmodule Callback do
  @type callback_type :: :init | :handle_call | :handle_cast | :handle_info |
                         :handle_continue | :terminate | :code_change | :format_status

  @type t :: %__MODULE__{
    type: callback_type(),
    name: atom(),
    arity: non_neg_integer(),
    clauses: non_neg_integer(),
    has_impl: boolean(),
    location: SourceLocation.t() | nil,
    metadata: map()
  }
end
```

### Detection Patterns

```elixir
# Standard callback
{:def, meta, [{:init, _, [_state]}]}, ...

# With @impl annotation
{:@, _, [{:impl, _, [true]}]}
{:def, meta, [{:handle_call, _, [_request, _from, _state]}]}, ...

# With guards
{:def, meta, [{:when, _, [{:handle_info, _, [msg, state]} | guards]}]}, ...
```

## Implementation Plan

- [x] 6.1.2.1 Create Callback struct
- [x] 6.1.2.2 Add callback detection functions
- [x] 6.1.2.3 Extract init/1 callbacks
- [x] 6.1.2.4 Extract handle_call/3 callbacks
- [x] 6.1.2.5 Extract handle_cast/2 callbacks
- [x] 6.1.2.6 Extract handle_info/2 callbacks
- [x] 6.1.2.7 Extract handle_continue/2 callbacks
- [x] 6.1.2.8 Extract terminate/2 callbacks
- [x] 6.1.2.9 Detect @impl annotations
- [x] 6.1.2.10 Write comprehensive tests (30 tests)

## Success Criteria

- [x] Detects all standard GenServer callbacks
- [x] Counts multiple clauses per callback
- [x] Detects @impl annotations
- [x] Extracts callback locations
- [x] All tests pass (741 doctests + 23 properties + 1918 tests)
- [x] Dialyzer clean (0 errors)

## Current Status

- **What works:** Full callback extraction implemented
- **What's next:** Task 6.2.1 - Supervisor Detection
- **How to run:** `mix test test/elixir_ontologies/extractors/otp/genserver_test.exs`
