# Feature 2.2.2: Node Matchers

## Problem Statement

The AST walker needs to identify specific types of AST nodes during traversal. We need pattern matchers that can reliably detect:
- Module definitions (`defmodule`)
- Function definitions (`def`, `defp`)
- Macro definitions (`defmacro`, `defmacrop`)
- Protocol definitions (`defprotocol`)
- Behaviour declarations (`@behaviour`)
- Struct definitions (`defstruct`)
- Type specifications (`@type`, `@spec`, `@callback`)
- Dependency declarations (`use`, `import`, `alias`)

## Solution Overview

Create a `Matchers` module with predicate functions that:
1. Use pattern matching on AST node structure
2. Handle various forms of each construct
3. Provide both specific matchers and general categories
4. Are composable with ASTWalker.find_all/2

## Technical Details

### File Location
`lib/elixir_ontologies/analyzer/matchers.ex`

### Dependencies
- None (pure pattern matching)

### API Design

| Function | Detects |
|----------|---------|
| `module?/1` | `defmodule` |
| `function?/1` | `def`, `defp` |
| `public_function?/1` | `def` only |
| `private_function?/1` | `defp` only |
| `macro?/1` | `defmacro`, `defmacrop` |
| `public_macro?/1` | `defmacro` only |
| `private_macro?/1` | `defmacrop` only |
| `protocol?/1` | `defprotocol` |
| `implementation?/1` | `defimpl` |
| `behaviour?/1` | `@behaviour` |
| `struct?/1` | `defstruct` |
| `type?/1` | `@type`, `@typep`, `@opaque` |
| `spec?/1` | `@spec` |
| `callback?/1` | `@callback`, `@macrocallback` |
| `type_spec?/1` | Any type specification |
| `use?/1` | `use` |
| `import?/1` | `import` |
| `alias?/1` | `alias` |
| `require?/1` | `require` |
| `dependency?/1` | Any dependency declaration |
| `attribute?/1` | `@attr` (any module attribute) |
| `doc?/1` | `@doc`, `@moduledoc`, `@typedoc` |
| `guard?/1` | `defguard`, `defguardp` |
| `delegate?/1` | `defdelegate` |
| `exception?/1` | `defexception` |
| `definition?/1` | Any definition construct |

## Implementation Plan

- [x] 2.2.2.1 Create `lib/elixir_ontologies/analyzer/matchers.ex`
- [x] 2.2.2.2 Implement `Matchers.module?/1` detecting `defmodule`
- [x] 2.2.2.3 Implement `Matchers.function?/1` detecting `def/defp`
- [x] 2.2.2.4 Implement `Matchers.macro?/1` detecting `defmacro/defmacrop`
- [x] 2.2.2.5 Implement `Matchers.protocol?/1` detecting `defprotocol`
- [x] 2.2.2.6 Implement `Matchers.behaviour?/1` detecting `@behaviour`
- [x] 2.2.2.7 Implement `Matchers.struct?/1` detecting `defstruct`
- [x] 2.2.2.8 Implement `Matchers.type_spec?/1` detecting `@type/@spec/@callback`
- [x] 2.2.2.9 Implement `Matchers.use?/1`, `Matchers.import?/1`, `Matchers.alias?/1`
- [x] 2.2.2.10 Write matcher tests

## Success Criteria

- [x] All matcher functions implemented with proper typespecs
- [x] Comprehensive documentation with examples
- [x] Tests covering:
  - Each matcher with positive cases
  - Each matcher with negative cases
  - Edge cases (empty modules, unusual syntax)
- [x] Matchers correctly identify all Elixir constructs

## Current Status

**Status**: Complete

### What Works
- Feature branch created: `feature/2.2.2-node-matchers`
- Planning document created
- Matchers module implemented with 25 matcher functions
- 155 tests passing (86 unit + 69 doctests)

### Functions Implemented
- **Definitions**: module?, function?, public_function?, private_function?, macro?, public_macro?, private_macro?, protocol?, implementation?, struct?, guard?, delegate?, exception?, definition?
- **Attributes**: behaviour?, attribute?, type?, spec?, callback?, type_spec?, doc?
- **Dependencies**: use?, import?, alias?, require?, dependency?

### How to Run
```bash
mix test test/elixir_ontologies/analyzer/matchers_test.exs
```
