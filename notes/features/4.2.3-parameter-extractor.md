# Feature: Task 4.2.3 - Parameter Extractor

## Overview

Create a parameter extractor that extracts function parameters from AST, including parameter position, names, default values, and pattern matching expressions.

## Problem Statement

Elixir function parameters can be:
1. Simple variables (`x`, `name`)
2. Pattern expressions (`{a, b}`, `%{key: value}`)
3. Default parameters with `\\` operator
4. Pin expressions (`^x`)

The extractor needs to:
1. Extract each parameter with its 0-indexed position
2. Identify parameter names when they are simple variables
3. Detect default parameters and extract default values
4. Detect pattern parameters (destructuring)
5. Support linking to type annotations from @spec

## Ontology Classes to Support

From `elixir-structure.ttl`:
- `Parameter` - Base parameter with `parameterPosition`, `parameterName`
- `DefaultParameter` - Parameter with `hasDefaultValue`
- `PatternParameter` - Parameter with `hasPatternExpression`

## Implementation Plan

### Step 1: Create Parameter Extractor Module
- [x] Create `lib/elixir_ontologies/extractors/parameter.ex`
- [x] Define `Parameter` result struct
- [x] Add type detection: `parameter?/1`

### Step 2: Implement Parameter.extract/2
- [x] Accept AST node (parameter) and optional context
- [x] Return `{:ok, %Parameter{}}` or `{:error, reason}`
- [x] Add `extract!/2` that raises on error

### Step 3: Extract Parameter Position
- [x] Set `position` (0-indexed)
- [x] Accept position as option

### Step 4: Extract Parameter Name
- [x] Extract name for simple variable parameters `{:name, _, nil}`
- [x] Set name to nil for pattern/complex parameters
- [x] Handle ignored variables (`_`, `_name`)

### Step 5: Detect Default Parameters
- [x] Detect `\\` operator in parameter AST
- [x] Extract default value expression
- [x] Set `has_default: true` in metadata
- [x] Store default value in result

### Step 6: Detect Pattern Parameters
- [x] Detect tuple patterns `{a, b}`
- [x] Detect map patterns `%{key: value}`
- [x] Detect list patterns `[head | tail]`
- [x] Detect struct patterns `%Module{}`
- [x] Store pattern expression in result

### Step 7: Extract All Parameters from Clause
- [x] Add `extract_all/1` accepting parameter list
- [x] Return ordered list of Parameter structs
- [x] Assign positions automatically

### Step 8: Write Tests
- [x] Test simple variable parameter extraction
- [x] Test parameter position (0-indexed)
- [x] Test default parameter detection
- [x] Test pattern parameter detection
- [x] Test ignored variable handling
- [x] Test extract_all with multiple parameters

## Result Struct Design

```elixir
%Parameter{
  position: non_neg_integer(),
  name: atom() | nil,
  type: :simple | :default | :pattern | :pin,
  expression: Macro.t(),
  default_value: Macro.t() | nil,
  location: SourceLocation.t() | nil,
  metadata: %{
    has_default: boolean(),
    is_pattern: boolean(),
    is_ignored: boolean(),
    pattern_type: atom() | nil  # :tuple, :map, :list, :struct, nil
  }
}
```

## Success Criteria

- [x] All 10 subtasks from plan completed
- [x] At least 14 tests passing (as specified in plan) - 73 tests (22 doctests + 51 unit tests)
- [x] Doctests for all public functions
- [x] Dialyzer passes with no errors
- [x] Consistent with Clause extractor patterns

## Files to Create/Modify

### Create
- `lib/elixir_ontologies/extractors/parameter.ex` - Main parameter extractor
- `test/elixir_ontologies/extractors/parameter_test.exs` - Test file

### Modify
- `notes/planning/phase-04.md` - Mark task 4.2.3 complete

## Status

- **Current Step:** Complete
- **Tests:** 73 tests (22 doctests + 51 unit tests), 0 failures
- **Dialyzer:** Passes with 0 errors
