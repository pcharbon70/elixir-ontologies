# Feature: Git Repository Extractor (Task 7.1.1)

## Problem Statement

The elixir-evolution.ttl ontology requires git repository information to track code provenance and enable source URL generation. We need to detect git repositories and extract metadata including remote URLs, branch names, and repository information.

## Solution Overview

Create a `Git` module in `lib/elixir_ontologies/analyzer/git.ex` that:
1. Detects if a directory is within a git repository
2. Extracts remote URL (origin)
3. Parses various URL formats (https, ssh, git@)
4. Extracts current and default branch names
5. Creates a `Repository` struct with all metadata

## Technical Details

### File Location
- `lib/elixir_ontologies/analyzer/git.ex`
- `test/elixir_ontologies/analyzer/git_test.exs`

### Repository Struct
```elixir
defmodule ElixirOntologies.Analyzer.Git.Repository do
  defstruct [
    :path,           # Absolute path to repository root
    :name,           # Repository name (derived from remote or directory)
    :remote_url,     # Origin remote URL
    :current_branch, # Current branch name
    :default_branch, # Default branch (main/master)
    :metadata        # Additional metadata
  ]
end
```

### Functions to Implement
- `detect_repo/1` - Find .git directory, return repo root path
- `remote_url/1` - Extract origin remote URL
- `parse_remote_url/1` - Parse URL into components (host, owner, repo)
- `current_branch/1` - Get current branch name
- `default_branch/1` - Get default branch (from remote HEAD or config)
- `repository/1` - Create full Repository struct

### URL Format Handling
- HTTPS: `https://github.com/owner/repo.git`
- SSH: `ssh://git@github.com/owner/repo.git`
- Git@: `git@github.com:owner/repo.git`
- Git: `git://github.com/owner/repo.git`

## Implementation Plan

- [x] 1. Create git.ex module with Repository struct
- [x] 2. Implement detect_repo/1 using File.dir? traversal
- [x] 3. Implement remote_url/1 using git config command
- [x] 4. Implement parse_remote_url/1 with regex patterns
- [x] 5. Implement current_branch/1 using git rev-parse
- [x] 6. Implement default_branch/1 using git symbolic-ref/show-ref
- [x] 7. Implement repository/1 combining all functions
- [x] 8. Write comprehensive tests
- [x] 9. Run dialyzer and fix any issues

## Success Criteria

- [x] All 40 tests pass (13 doctests + 27 unit tests)
- [x] Dialyzer clean
- [x] Handles all common remote URL formats (https, ssh, git@, git://)
- [x] Gracefully handles non-git directories
- [x] Works with the current repository as test case

## Current Status

- **What works:** All implementation complete
- **What's next:** Task 7.1.2 Commit Information Extractor
- **How to run:** `mix test test/elixir_ontologies/analyzer/git_test.exs`
