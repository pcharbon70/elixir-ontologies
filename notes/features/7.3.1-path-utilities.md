# Feature: Path Utilities (Task 7.3.1)

## Problem Statement

Implement path utilities for source file management in the context of git repositories. This enables:
- Converting absolute paths to repository-relative paths
- Normalizing paths across different platforms (Windows/Unix)
- Linking source files to their repository context

## Solution Overview

Added path utility functions to the existing `Git` module:
- `relative_to_repo/2` - Convert absolute path to repository-relative
- `normalize_path/1` - Normalize path separators and resolve `.` and `..`
- `file_in_repo?/2` - Check if file is within repository
- `source_file/1,2` - Create a SourceFile struct linking file to repository

## Implementation Plan

- [x] 1. Add `relative_to_repo/2` to `Git` module
- [x] 2. Add `normalize_path/1` helper for cross-platform normalization
- [x] 3. Add `file_in_repo?/2` check function
- [x] 4. Create `SourceFile` struct with absolute/relative paths and repo link
- [x] 5. Add `source_file/1,2` factory functions
- [x] 6. Write comprehensive tests
- [x] 7. Run tests and dialyzer

## Technical Details

### Functions Added

```elixir
# Convert absolute path to relative (within repository)
@spec relative_to_repo(String.t(), String.t()) :: {:ok, String.t()} | {:error, atom()}
def relative_to_repo(file_path, repo_path)

# Normalize path separators
@spec normalize_path(String.t()) :: String.t()
def normalize_path(path)

# Check if file is within repository
@spec file_in_repo?(String.t(), String.t()) :: boolean()
def file_in_repo?(file_path, repo_path)

# Create SourceFile struct with explicit repo
@spec source_file(String.t(), String.t()) :: {:ok, SourceFile.t()} | {:error, atom()}
def source_file(file_path, repo_path)

# Create SourceFile struct with auto-detected repo
@spec source_file(String.t()) :: {:ok, SourceFile.t()} | {:error, atom()}
def source_file(file_path)
```

### SourceFile Struct

```elixir
defmodule SourceFile do
  defstruct [
    :absolute_path,      # Full path on disk
    :relative_path,      # Path relative to repo root
    :repository_path,    # Path to repository root
    :last_commit         # Last commit SHA that modified this file
  ]
end
```

## Success Criteria

- [x] All tests pass (98 tests: 29 doctests + 69 unit tests)
- [x] Dialyzer clean
- [x] Relative path calculation works correctly
- [x] Paths outside repo handled gracefully
- [x] Path normalization handles both Unix and Windows separators

## Current Status

- **What works:** All path utilities implemented and tested
- **What's next:** Merge to develop
- **How to run:** `mix test test/elixir_ontologies/analyzer/git_test.exs`
